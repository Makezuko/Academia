CONNECT SYSTEM/123123@localhost:1521/XEPDB1

ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD HH24:MI:SS';


CREATE TABLE aluno (
    cpf VARCHAR2(11) PRIMARY KEY,     
    nome VARCHAR2(100) NOT NULL,     
    email VARCHAR2(100) NOT NULL,    
    senha VARCHAR2(255) NOT NULL,     
    telefone VARCHAR2(19) NOT NULL,   
    plano VARCHAR2(50) NOT NULL       
);

CREATE TABLE frequencia (
    id_frequencia NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
    cpf_aluno VARCHAR2(11) NOT NULL,           
    entrada TIMESTAMP NOT NULL,                
    saida TIMESTAMP,                  
    CONSTRAINT fk_aluno FOREIGN KEY (cpf_aluno) REFERENCES aluno(cpf)
    ON DELETE CASCADE
);


CREATE TABLE administradores (
    ID_admin NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nome VARCHAR2(50),
    email VARCHAR2(50) UNIQUE,
    senha VARCHAR2(100)
);

DROP TABLE alunos;
DROP TABLE frequencia;
DROP TABLE administradores;
DROP TABLE relatorio;

INSERT INTO aluno (cpf, nome, email, senha, telefone, plano)
VALUES 
('23951425814', 'Matias Amma', 'matiasamma@gmail.com', '$2b$10$5spzF2Ofx8Yy5Bemktm9Q.oNHXkACjG77yBvuQMqcuZXVlQDCXtce9', '19981713212', 'Mensal');

INSERT INTO frequencia (cpf_aluno, entrada, saida)
VALUES

('23951425814', TO_TIMESTAMP('2024-12-04 01:30:00', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2024-12-04 09:30:00', 'YYYY-MM-DD HH24:MI:SS'));

INSERT INTO administradores (nome, email, senha)
VALUES
('Admin', 'admin@gmail.com', '$2b$10$5spzF2Ofx8Yy5Bemktm9Q.oNHXkACjG77yBvuQMqcuZXVlQDCXtce');